import { createClient } from '@supabase/supabase-js'; import dotenv from 'dotenv'; dotenv.config(); const supabaseUrl = process.env.VITE_SUPABASE_URL; const supabaseKey = process.env.VITE_SUPABASE_ANON_KEY; const supabase = createClient(supabaseUrl, supabaseKey); async function updatePost() { const txid = 'aba0284aae55c76270f4b2f80aac694f7afdcf4b5ef1148c8147cba6321fc187'; const { error } = await supabase.rpc('update_post', { p_id: txid, p_content: 'Ordinal inscription JPEG image', p_author_address: 'testnet', p_description: 'JPEG image inscription from testnet block 1660542', p_media_url: null }); if (error) { console.error('Error updating post:', error); const { error: directError } = await supabase.from('Post').upsert({ id: txid, content: 'Ordinal inscription JPEG image', author_address: 'testnet', description: 'JPEG image inscription from testnet block 1660542', media_url: null, is_locked: true, media_type: 'image/jpeg', created_at: new Date().toISOString() }); if (directError) { console.error('Error with direct upsert:', directError); return; } } console.log('Post updated successfully'); const { data: updatedPost } = await supabase.from('Post').select('*').eq('id', txid).single(); console.log('Updated post data:', updatedPost); } updatePost().catch(console.error);
